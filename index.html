<!DOCTYPE html>
<html lang="en" class="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="TSC English Academy offers premium English lessons for all ages, focusing on confidence and flexibility." />
  <meta name="theme-color" content="#000000" />
  <title>TSC English Academy - Premium English Lessons</title>

  <!-- ========================= SEO / OGP ========================= -->
  <link rel="canonical" href="https://example.com/" />
  <meta property="og:title" content="TSC English Academy - Premium English Lessons" />
  <meta property="og:description" content="Anytime, anywhere. Learn English with confidence through output-focused lessons led by teachers living abroad or from overseas backgrounds." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="images/1..1...jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- ========================= Icons ========================= -->
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- ========================= Preconnect (perf) ========================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://docs.google.com" />
  <link rel="preconnect" href="https://googleusercontent.com" crossorigin />

  <!-- ========================= Fonts ========================= -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700&display=swap"
  />

  <!-- ========================= Preload key images ========================= -->
  <link rel="preload" as="image" href="images/1..1...jpg" />
  <link rel="preload" as="image" href="images/1..1.jpg" />
  <link rel="preload" as="image" href="images/1..jpg" />

  <!-- ========================= Styles ========================= -->
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/hero.css" />
  <link rel="stylesheet" href="css/components.css" />

  <!-- ========================= Scripts ========================= -->
  <script src="js/ui.js" defer></script>
  <script src="js/effects.js" defer></script>
  <script src="js/particles.js" defer></script>
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>

  <!-- 言語切替 -->
  <div class="lang-toggle" role="group" aria-label="Language selection">
    <button id="btn-en" class="lang-btn-circle active" onclick="setLang('en')" aria-pressed="true" type="button">EN</button>
    <button id="btn-ja" class="lang-btn-circle" onclick="setLang('ja')" aria-pressed="false" type="button">JA</button>
  </div>

  <main id="main">
    <!-- ========================= 1) Hero ========================= -->
    <section aria-labelledby="hero-title" class="fade-in-up" data-parallax="0.18">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" id="hero-bg-front" style="background-image: url('images/1..1...jpg');" data-speed="1"></div>
        <div class="bg-layer" id="hero-bg-back" style="background-image: url('images/1..1.jpg');" data-speed="0.85"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="hero">
        <div class="hero-left">
          <div data-lang lang="ja">
            <h1 id="hero-title">いつでも、どこでも<br />確かな英語力を</h1>
            <p>小学生から大人まで、目的に合わせたカリキュラムで学べます。</p>
            <p>初心者でも安心の丁寧な指導と、話す力を伸ばすアウトプット重視のレッスン。</p>
            <a href="#form-section" class="cta-button" aria-label="レッスン申し込みフォームへ移動">レッスン申し込み</a>
          </div>
          <div data-lang lang="en">
            <h1 id="hero-title-en">Anytime, Anywhere<br />Learn with Confidence</h1>
            <p>Our curriculum is designed for learners of all levels—from beginners to advanced.</p>
            <p>You'll gain confidence through output-focused lessons guided by experienced instructors.</p>
            <a href="#form-section" class="cta-button" aria-label="Go to application form">Start Your Lesson</a>
          </div>
        </div>

        <div class="hero-right">
          <div class="logo-wrap">
            <img src="images/1..jpg" alt="TSC English Academy Logo" width="640" height="640" fetchpriority="high" decoding="async" />
          </div>
          <noscript>
            <img src="images/1..jpg" alt="TSC English Academy Logo" width="640" height="640" />
          </noscript>
        </div>
      </div>
    </section>

    <!-- ========================= 2) 特徴 ========================= -->
    <section aria-labelledby="features-title" class="fade-in-up" data-parallax="0.14">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1.jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1...jpg');" data-speed="0.9"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="features-title" class="section-title">TSC English Academyの特徴</h2>
            <p class="section-sub">Confidence. Flexibility. Results.</p>
          </div>

          <div data-lang lang="en">
            <h2 id="features-title-en" class="section-title">Why Choose TSC English Academy?</h2>
            <p class="section-sub">Confidence. Flexibility. Results.</p>
          </div>

          <div class="card-grid" role="list">
            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <span class="badge">少人数制</span>
                <h3>発話量を最大化</h3>
                <p>一人ひとりが話す時間を確保。アウトプット中心で伸ばします。</p>
              </div>
              <div data-lang lang="en">
                <span class="badge">Small Class</span>
                <h3>More Speaking Time</h3>
                <p>We keep classes small so you speak more and grow faster.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <span class="badge">柔軟スケジュール</span>
                <h3>オンライン/対面</h3>
                <p>生活に合わせて学習。いつでもどこでも受講可能です。</p>
              </div>
              <div data-lang lang="en">
                <span class="badge">Flexible</span>
                <h3>Online & In-Person</h3>
                <p>Learn anywhere, anytime—fit lessons into your life.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <span class="badge">目的別</span>
                <h3>カリキュラム設計</h3>
                <p>留学・受験・ビジネスなど目的に合わせて最適化します。</p>
              </div>
              <div data-lang lang="en">
                <span class="badge">Goal-Oriented</span>
                <h3>Tailored Curriculum</h3>
                <p>Study plans optimized for study abroad, exams, or business.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================= 3) 指導スタイル ========================= -->
    <section aria-labelledby="approach-title" class="fade-in-up" data-parallax="0.16">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1...jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1.jpg');" data-speed="0.9"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="approach-title" class="section-title">指導スタイル：自然な英語に触れるために</h2>
            <p class="section-sub">海外在住・海外出身の講師がレッスンを担当し、実践的で自然な表現に触れられる環境を提供します。</p>
          </div>

          <div data-lang lang="en">
            <h2 id="approach-title-en" class="section-title">Teaching Approach: Real English, Real Confidence</h2>
            <p class="section-sub">Lessons are led by teachers living abroad or from overseas backgrounds, so you’ll practice authentic, natural English.</p>
          </div>

          <div class="card-grid" role="list">
            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>発話比率 &gt; 50%</h3>
                <p>受講者がたくさん話す設計。間違いは即フィードバック。</p>
              </div>
              <div data-lang lang="en">
                <h3>Speaking &gt; 50%</h3>
                <p>You’ll talk a lot. Mistakes are corrected on the spot.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>ロールプレイ</h3>
                <p>旅行・面接・会議など、実場面を想定した練習で運用力を強化。</p>
              </div>
              <div data-lang lang="en">
                <h3>Role-plays</h3>
                <p>Practice real-life situations: travel, interviews, meetings.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>個別フィードバック</h3>
                <p>弱点を特定し、次回に改善がつながる具体アドバイス。</p>
              </div>
              <div data-lang lang="en">
                <h3>Personal Feedback</h3>
                <p>Clear advice you can apply immediately in your next lesson.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================= 4) 体験者の声 ========================= -->
    <section aria-labelledby="voices-title" class="fade-in-up" data-parallax="0.14">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1.jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1...jpg');" data-speed="0.88"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="voices-title" class="section-title">学習者の声</h2>
            <p class="section-sub">リアルな声が、続ける力になる。</p>
          </div>

          <div data-lang lang="en">
            <h2 id="voices-title-en" class="section-title">What Our Learners Say</h2>
            <p class="section-sub">Real stories that keep you motivated.</p>
          </div>

          <div class="card-grid" role="list">
            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>大学生・Aさん</h3>
                <p>「毎回たくさん話すので、留学前に自信がつきました。説明も分かりやすい！」</p>
              </div>
              <div data-lang lang="en">
                <h3>University Student (A)</h3>
                <p>“I speak a lot every lesson and feel more confident before my study abroad.”</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>保護者・Bさん</h3>
                <p>「子どもが自分から英語で話したいと言うように。レッスンが楽しそうです。」</p>
              </div>
              <div data-lang lang="en">
                <h3>Parent (B)</h3>
                <p>“My child now wants to speak English by themselves—lessons look fun!”</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>社会人・Cさん</h3>
                <p>「ロールプレイで会議の表現を練習。翌週すぐ使えて効果を実感しました。」</p>
              </div>
              <div data-lang lang="en">
                <h3>Working Professional (C)</h3>
                <p>“Role-plays for meetings helped me use new phrases the very next week.”</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================= 5) FAQ ========================= -->
    <section aria-labelledby="faq-title" class="fade-in-up" data-parallax="0.16">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1...jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1.jpg');" data-speed="0.9"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="faq-title" class="section-title">よくある質問</h2>
            <p class="section-sub">まずは無料体験で、目的とレベルを確認します。</p>
          </div>

          <div data-lang lang="en">
            <h2 id="faq-title-en" class="section-title">FAQ</h2>
            <p class="section-sub">Start with a free trial to check your goals and level.</p>
          </div>

          <div class="card-grid" role="list">
            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>初心者でも大丈夫ですか？</h3>
                <p>はい。完全初心者から上級者まで対応しています。無料体験で最適な進め方をご提案します。</p>
              </div>
              <div data-lang lang="en">
                <h3>Can complete beginners join?</h3>
                <p>Yes. We welcome all levels. We’ll propose the best plan after your free trial.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>オンラインと対面は切り替えできますか？</h3>
                <p>可能です。スケジュールに合わせて柔軟に選べます。</p>
              </div>
              <div data-lang lang="en">
                <h3>Can I switch between online and in-person?</h3>
                <p>Yes. Choose flexibly based on your schedule.</p>
              </div>
            </div>

            <div class="card" role="listitem">
              <div data-lang lang="ja">
                <h3>教材はどうなりますか？</h3>
                <p>目的に合わせて提案します。無料体験時に詳しくご案内します。</p>
              </div>
              <div data-lang lang="en">
                <h3>What about learning materials?</h3>
                <p>We recommend materials tailored to your goals. Details at your trial.</p>
              </div>
            </div>
          </div>

          <a href="#form-section" class="cta-button" aria-label="無料体験に申し込む / Start Free Trial">
            無料体験を申し込む / Start Free Trial
          </a>
        </div>
      </div>
    </section>

    <!-- ========================= 6) 最終CTA ========================= -->
    <section aria-labelledby="final-cta-title" class="fade-in-up" data-parallax="0.12">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1.jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1...jpg');" data-speed="0.92"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="final-cta-title" class="section-title">無料体験で、あなたに合う学び方を</h2>
            <p class="section-sub">体験の内容に基づいて、最適な学習プランをご提案します。</p>
          </div>

          <div data-lang lang="en">
            <h2 id="final-cta-title-en" class="section-title">Start a Free Trial—Find Your Best Way to Learn</h2>
            <p class="section-sub">We’ll propose a tailored plan after your trial lesson.</p>
          </div>

          <a href="#form-section" class="cta-button">Go to Application Form</a>
        </div>
      </div>
    </section>

    <!-- ========================= 7) お申し込みフォーム ========================= -->
    <section id="form-section" aria-labelledby="form-title" class="fade-in-up" data-parallax="0.10">
      <div class="bg-stack" aria-hidden="true">
        <div class="bg-layer is-front" style="background-image: url('images/1..1...jpg');" data-speed="1"></div>
        <div class="bg-layer" style="background-image: url('images/1..1.jpg');" data-speed="0.92"></div>
        <div class="bg-vignette"></div>
      </div>

      <div class="content">
        <div class="panel">
          <div data-lang lang="ja">
            <h2 id="form-title" class="section-title">お申し込みフォーム</h2>
            <p class="section-sub">必要事項を入力して送信してください。担当者よりご連絡いたします。</p>
            <iframe
              src="https://docs.google.com/forms/d/e/1FAIpQLSdQjY0ErveIKaj6KAnCKTVZhuIsCX-SWcti7doMOWqdwCGPfg/viewform?embedded=true"
              width="100%"
              height="1600"
              frameborder="0"
              marginheight="0"
              marginwidth="0"
              title="申し込みフォーム"
              loading="lazy"
            >読み込んでいます…</iframe>
          </div>

          <div data-lang lang="en">
            <h2 id="form-title-en" class="section-title">Application Form</h2>
            <p class="section-sub">Please fill out the form below. We will contact you shortly.</p>
            <iframe
              src="https://docs.google.com/forms/d/e/1FAIpQLSdQjY0ErveIKaj6KAnCKTVZhuIsCX-SWcti7doMOWqdwCGPfg/viewform?embedded=true"
              width="100%"
              height="1600"
              frameborder="0"
              marginheight="0"
              marginwidth="0"
              title="Application Form"
              loading="lazy"
            >Loading…</iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================= 8) フッター ========================= -->
    <footer
      style="
        padding: 34px 16px;
        background: #000000;
        text-align: center;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
      "
    >
      <div class="content" style="max-width: 1160px; margin: 0 auto;">
        <p style="opacity: 0.88; margin: 0 0 8px;">
          © <span id="year"></span> TSC English Academy
        </p>
        <p style="opacity: 0.65; margin: 0;">
  Contact: <a href="mailto:tscenglishacademy@gmail.com" style="color:#ffd700; text-decoration:none;">tscenglishacademy@gmail.com</a>
</p>

        </p>
      </div>
    </footer>
  </main>

  <a href="#form-section" class="cta-button fixed-cta">Start Your Free Trial</a>

  <!-- ========================= Structured Data (Technical SEO) ========================= -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "TSC English Academy",
    "url": "https://example.com/",
    "logo": "https://example.com/images/1..jpg",
    "sameAs": []
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "初心者でも大丈夫ですか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "はい。完全初心者から上級者まで対応しています。無料体験で最適な進め方をご提案します。"
        }
      },
      {
        "@type": "Question",
        "name": "オンラインと対面は切り替えできますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "可能です。スケジュールに合わせて柔軟に選べます。"
        }
      },
      {
        "@type": "Question",
        "name": "教材はどうなりますか？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "目的に合わせて提案します。無料体験時に詳しくご案内します。"
        }
      }
    ]
  }
  </script>

  <noscript>
    <div style="background:#111111;color:#ffffff;padding:12px;text-align:center;">
      JavaScript is disabled. Some animations and language toggle may not work.
    </div>
  </noscript>
</body>
</html>
    // 言語切替
    function setLang(lang) {
      const html = document.documentElement;
      html.classList.remove('ja', 'en');
      html.classList.add(lang);
      html.setAttribute('lang', lang);

      const jaBtn = document.getElementById('btn-ja');
      const enBtn = document.getElementById('btn-en');

      jaBtn.classList.toggle('active', lang === 'ja');
      enBtn.classList.toggle('active', lang === 'en');

      jaBtn.setAttribute('aria-pressed', String(lang === 'ja'));
      enBtn.setAttribute('aria-pressed', String(lang === 'en'));
    }

    // フェードイン（IntersectionObserver）
    const observer = new IntersectionObserver(
      (entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('show');
            obs.unobserve(entry.target);
          }
        });
      },
      { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.12 }
    );
    document.querySelectorAll('.fade-in-up').forEach((el) => observer.observe(el));

    // 年号
    document.getElementById('year').textContent = new Date().getFullYear();

    // ========================= 背景クロスフェード + パララックス（スマホ同等挙動） =========================
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const clamp = (v, min, max) => Math.min(max, Math.max(min, v));

    const sections = Array.from(document.querySelectorAll('section')).map((section) => {
      const stack = section.querySelector('.bg-stack');
      const layers = stack ? stack.querySelectorAll('.bg-layer') : null;
      const front = layers ? layers[0] : null;
      const back  = layers ? layers[1] : null;
      const strength = parseFloat(section.getAttribute('data-parallax') || '0.15');
      return { el: section, stack, front, back, strength, center: 0, top: 0, height: 0 };
    });

    function recalcCenters() {
      sections.forEach((s) => {
        if (!s.el) return;
        s.top = s.el.offsetTop;
        s.height = s.el.offsetHeight;
        s.center = s.top + s.height / 2;
      });
    }

    let ticking = false;
    function onScroll() {
      if (prefersReduced) return; // 低モーション設定ではスキップ
      if (!ticking) {
        requestAnimationFrame(applyScrollEffects);
        ticking = true;
      }
    }

    function applyScrollEffects() {
      const viewportH = window.innerHeight || document.documentElement.clientHeight;
      const scrollY = window.scrollY || window.pageYOffset || 0;

      sections.forEach((s) => {
        if (!s.stack || !s.front || !s.back) return;

        // セクション中央からの距離を -1〜+1 に正規化
        const distance = (scrollY + viewportH / 2 - s.center) / (viewportH / 1.1);
        const ratio = clamp(Math.abs(distance), 0, 1);

        // クロスフェード
        const frontOpacity = clamp(1 - ratio * 0.85, 0.15, 1);
        const backOpacity  = clamp(0.35 + ratio * 0.55, 0.35, 0.9);
        s.front.style.opacity = String(frontOpacity);
        s.back.style.opacity  = String(backOpacity);

        // パララックス
        const frontSpeed = parseFloat(s.front.getAttribute('data-speed') || '1');
        const backSpeed  = parseFloat(s.back.getAttribute('data-speed') || '0.9');
        const frontShift = (scrollY - s.center) * s.strength * (1 / frontSpeed);
        const backShift  = (scrollY - s.center) * s.strength * (1 / backSpeed) * 0.7;
        s.front.style.transform = `translate3d(0, ${frontShift}px, 0) scale(1.06)`;
        s.back .style.transform = `translate3d(0, ${backShift }px, 0) scale(1.06)`;
      });

      ticking = false;
    }

    // 初期化と各種イベント（スマホ最適）
    function initParallax() {
      recalcCenters();
      applyScrollEffects();
    }

    initParallax();
    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', () => { recalcCenters(); applyScrollEffects(); }, { passive: true });
    window.addEventListener('orientationchange', () => { setTimeout(() => { recalcCenters(); applyScrollEffects(); }, 120); }, { passive: true });

    if (window.visualViewport) {
      window.visualViewport.addEventListener('resize', () => { recalcCenters(); applyScrollEffects(); }, { passive: true });
      window.visualViewport.addEventListener('scroll', () => { recalcCenters(); applyScrollEffects(); }, { passive: true });
    }

    window.addEventListener('load', () => { recalcCenters(); applyScrollEffects(); }, { passive: true });
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(() => { recalcCenters(); applyScrollEffects(); });
    }

    // ========================= CTA Ripple Effect（スマホ対応 Pointer API） =========================
    function attachRipple(el) {
      function spawnRipple(e) {
        const rect = el.getBoundingClientRect();
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        const isTouch = e.touches && e.touches[0];
        const cx = isTouch ? e.touches[0].clientX : (e.clientX ?? rect.left + rect.width / 2);
        const cy = isTouch ? e.touches[0].clientY : (e.clientY ?? rect.top  + rect.height / 2);
        ripple.style.left = (cx - rect.left) + 'px';
        ripple.style.top  = (cy - rect.top ) + 'px';
        el.appendChild(ripple);
        setTimeout(() => ripple.remove(), 700);
      }
      el.addEventListener('pointerdown', spawnRipple, { passive: true });
    }
    document.querySelectorAll('.cta-button, .fixed-cta').forEach(attachRipple);

    // ========================= 追加: ロゴ浮遊 / ヒーロー傾き / カードスタガー表示（調整可能） =========================
    (function enhanceMotion() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const rootStyle = getComputedStyle(document.documentElement);
      const heroTiltStrengthRoot = parseFloat(rootStyle.getPropertyValue('--hero-tilt-strength')) || 6;
      const heroMobileMult = parseFloat(rootStyle.getPropertyValue('--hero-tilt-mobile-multiplier')) || 0.28;
      const cardStaggerMs = parseInt(rootStyle.getPropertyValue('--card-stagger-ms')) || 90;

      // 判定: タッチ優先（粗いポインタ）や狭い画面は "coarse" とみなす
      const isCoarse = window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 820 || 'ontouchstart' in window;

      // ロゴ浮遊（モーション抑制時は付けない）
      const logoWrap = document.querySelector('.logo-wrap');
      if (!prefersReduced && logoWrap) {
        // 小さい画面では浮遊を弱める（付けない案も選べる）
        if (isCoarse) {
          // 軽くだけ動かす — 再生時間を長くして目立たなくする
          logoWrap.classList.add('floaty');
          logoWrap.style.setProperty('--logo-float-duration', '9.5s');
        } else {
          logoWrap.classList.add('floaty');
        }
      }

      // ヒーローの傾き（pointermove）
      const heroRight = document.querySelector('.hero-right');
      const heroImg = heroRight ? heroRight.querySelector('img') : null;
      if (heroRight && heroImg && !prefersReduced) {
        // 強さを決定（モバイルなら弱めるか無効化）
        const baseStrength = heroTiltStrengthRoot;
        const effectiveStrength = isCoarse ? baseStrength * heroMobileMult : baseStrength;

        if (effectiveStrength > 0.5) {
          let rafId = null;
          heroRight.addEventListener('pointermove', (e) => {
            if (rafId) cancelAnimationFrame(rafId);
            rafId = requestAnimationFrame(() => {
              const rect = heroRight.getBoundingClientRect();
              const x = (e.clientX - rect.left) / rect.width - 0.5; // -0.5..+0.5
              const y = (e.clientY - rect.top) / rect.height - 0.5;
              const rotY = x * effectiveStrength; // 左右傾き
              const rotX = -y * effectiveStrength; // 上下傾き
              heroImg.style.transform = `rotateY(${rotY}deg) rotateX(${rotX}deg) translateZ(6px)`;
            });
          }, { passive: true });
          heroRight.addEventListener('pointerleave', () => { heroImg.style.transform = ''; }, { passive: true });
        } else {
          // 極端に弱ければ完全に無効化
          heroImg.style.transform = '';
        }
      }

      // セクション内のカードをスタガーで表示（カード数に応じて遅延）
      const cardObserver = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          const cards = Array.from(entry.target.querySelectorAll('.card'));
          cards.forEach((c, i) => {
            if (prefersReduced) {
              c.classList.add('revealed');
            } else {
              setTimeout(() => c.classList.add('revealed'), i * cardStaggerMs);
            }
          });
          obs.unobserve(entry.target);
        });
      }, { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.12 });

      document.querySelectorAll('section').forEach(s => cardObserver.observe(s));
    })();

    // ========================= Heading sheen + card keyboard accessibility + scroll-linked text parallax =========================
    (function premiumEnhancements() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      // 1) 見出しシーン: セクション内で見出しが表示されたら一度だけシーンを流す
      if (!prefersReduced) {
        const titleObserver = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            const title = entry.target.querySelector('.section-title');
            if (title && !title.classList.contains('sheen')) {
              title.classList.add('sheen');
              const onAnimEnd = () => { title.classList.remove('sheen'); title.removeEventListener('animationend', onAnimEnd); };
              title.addEventListener('animationend', onAnimEnd);
            }
            obs.unobserve(entry.target);
          });
        }, { root: null, rootMargin: '0px 0px -12% 0px', threshold: 0.2 });

        document.querySelectorAll('section').forEach(s => titleObserver.observe(s));
      }

      // 2) カードのキーボード操作: tabindex を付与、Enter/Space で内部の最初のリンクをフォーカス/クリック
      document.querySelectorAll('.card').forEach(card => {
        if (!card.hasAttribute('tabindex')) card.setAttribute('tabindex', '0');
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            const link = card.querySelector('a, button');
            if (link) {
              e.preventDefault();
              link.focus();
              link.click && link.click();
            }
          }
        });
      });

      // 3) スクロール連動テキストパララックス: セクション中心との距離で小さく translateY を適用
      if (!prefersReduced) {
        const textTargets = Array.from(document.querySelectorAll('.section-title, .section-sub'))
          .map(el => ({ el, parent: el.closest('section') }));

        const rootStyle = getComputedStyle(document.documentElement);
        const textParallaxMax = parseFloat(rootStyle.getPropertyValue('--text-parallax-max')) || 6;

        function applyTextParallax() {
          const viewportH = window.innerHeight || document.documentElement.clientHeight;
          const scrollY = window.scrollY || window.pageYOffset || 0;
          textTargets.forEach(t => {
            if (!t.parent) return;
            const rect = t.parent.getBoundingClientRect();
            const center = scrollY + rect.top + rect.height / 2;
            const distance = (scrollY + viewportH / 2 - center) / (viewportH / 1.2);
            const ratio = Math.max(-1, Math.min(1, distance));
            const translate = ratio * textParallaxMax; // controlled by CSS var
            t.el.style.transform = `translateY(${translate}px)`;
            t.el.style.transition = 'transform 420ms cubic-bezier(.2,.9,.2,1)';
          });
        }

        let rafId = null;
        window.addEventListener('scroll', () => { if (rafId) cancelAnimationFrame(rafId); rafId = requestAnimationFrame(applyTextParallax); }, { passive: true });
        window.addEventListener('resize', () => { if (rafId) cancelAnimationFrame(rafId); rafId = requestAnimationFrame(applyTextParallax); }, { passive: true });
        // initial
        requestAnimationFrame(applyTextParallax);
      }
    })();

    // ========================= 3Dカードチルト（pointer-based） =========================
    (function card3DTilt() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const rootStyle = getComputedStyle(document.documentElement);
      const baseStrength = parseFloat(rootStyle.getPropertyValue('--card-tilt-strength')) || 12;
      const baseScale = parseFloat(rootStyle.getPropertyValue('--card-tilt-scale')) || 1.012;
      const isCoarse = window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 820 || 'ontouchstart' in window;

      // ラップ処理: card 内の既存ノードを .card-inner に移動
      document.querySelectorAll('.card').forEach(card => {
        if (card.querySelector('.card-inner')) return; // 既にラップ済み
        const inner = document.createElement('div');
        inner.className = 'card-inner';
        // move children into inner
        while (card.firstChild) inner.appendChild(card.firstChild);
        card.appendChild(inner);

        // set pointer handlers unless reduced/motion or coarse pointer
        if (prefersReduced || isCoarse) {
          // degrade: reveal without tilt
          card.classList.add('no-3d');
          return;
        }

        let rafId = null;
        inner.style.transform = 'translateZ(0)';

        function onPointerMove(e) {
          if (rafId) cancelAnimationFrame(rafId);
          rafId = requestAnimationFrame(() => {
            const rect = card.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;
            const dx = (e.clientX - cx) / (rect.width / 2); // -1..1
            const dy = (e.clientY - cy) / (rect.height / 2);
            const rotY = dx * baseStrength; // degrees
            const rotX = -dy * baseStrength;
            inner.style.transform = `rotateY(${rotY}deg) rotateX(${rotX}deg) scale(${baseScale})`;
            // subtle shadow during tilt
            card.style.boxShadow = `0 ${Math.abs(rotX) + 8}px ${18 + Math.abs(rotY)}px rgba(0,0,0,0.45)`;
          });
        }

        function onLeave() {
          if (rafId) cancelAnimationFrame(rafId);
          inner.style.transform = '';
          card.style.boxShadow = '';
        }

        card.addEventListener('pointermove', onPointerMove, { passive: true });
        card.addEventListener('pointerleave', onLeave, { passive: true });
        card.addEventListener('pointercancel', onLeave, { passive: true });
        card.addEventListener('focus', () => { inner.style.transform = `scale(${baseScale})`; }, true);
        card.addEventListener('blur', () => { inner.style.transform = ''; }, true);
      });
    })();
  </script>

  <noscript>
    <div style="background:#111111;color:#ffffff;padding:12px;text-align:center;">
      JavaScript is disabled. Some animations and language toggle may not work.
    </div>
  </noscript>
</body>
</html>
